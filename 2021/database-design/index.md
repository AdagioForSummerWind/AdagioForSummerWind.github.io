# Mysql_base_06

# 数据库设计
## 强弱实体的个人理解
在正文之前，我总结一下我对**强弱实体**的个人理解：
* 区别弱实体与强实体的关键在于主键，“依赖”的实质是主键之间的关系。所以可以看作主键之间是否有关系、主键是否是组合主键的问题。
* 弱实体与强实体可以相互转换，没有绝对意义上的强与弱。既然区别弱实体与强实体的关键在于主键，那么一个同样意义的表，当我给它一个编号作为主键，那么它就不是弱实体，而如果我令它的主键是组合主键，它就是弱实体。
* 弱实体也可以依赖于弱实体。
* 弱实体与它所依赖的实体之间的关系只能是1：1或n：1。也就是说，一个弱实体实例不可能依赖于同一实体的多个实例。这个其实很好理解，因为如果弱实体实例A依赖于实例B，那么A的主键要包括B的主键，所以A当然不可以依赖于很多个B。
## 数据库设计过程概述
* 需求分析
* 概念数据库设计
* 逻辑数据库设计
* 物理数据库设计
## 数据库设计过程之需求分析

* 目标：理解企业、理解企业业务过程与数据处理流程、理解数据处理的性能需求
* 提交物：需求分析报告
* 使以下内容清楚：
    * 企业的部门-岗位划分：不同岗位负责的各种日常管理信息表/报表
    * 形成各种报表的基础数据表
    * 各种数据表之间的处理关系(What--How)
    * 围绕数据表的业务处理关系(Who—When--Where)
    * 尚未实施但未来可能实施的需求
* 形成数据库设计的“源”清单和“属性”清单，及详细描述，尤其注意业务规则与属性处理规则
* 注意收集和理解: 
    * 业务规则及其在表的处理方面的体现 
    * 不仅报表、单据是源，企业的查询需求与管理需求等也是源
* 注意命名: 
    * 命名要规范，并且要含义明确
    * 尤其要注意类似于“数量”这样的多含义属性，比如“计划数量”“采购数量”“到货数量”等

## 数据库设计过程之概念数据库设计
* 目标：进一步深入理解企业，对信息源进行抽象，发现信息(属性)之间的内在本质联系，这些本质联系可能隐藏于需求分析得到的信息源中。
* 提交物：概念数据库设计报告
* 使以下内容清楚：
    * 各种实体的发现、划分和定义
    * 各种实体属性的发现、分析和定义
    * 各种实体联系的发现、分析和定义
    * 外部视图(模式)和概念视图(模式)的定义
* 用统一的表达方法，如E-R模型给出描述；不仅绘制出来，而且绘制正确；
* 消除冲突
    * 属性冲突
        * 属性域的冲突：属性的类型、取值范围不同
            * 如不同学校的学号编码方式不同 
        * 属性取值单位冲突
            * 如重量分别采用磅、千克
    * 结构冲突
        * 同一对象在不同应用中的抽象不同
            *如职工在某应用中是实体，在另一应用中则抽象为属性 
        * 同一实体在不同E-R图中属性组成不同
        * 实体之间的联系在不同E-R图中呈现不同的类型
    * 命名冲突
        * 同名异义：不同意义的对象具有相同的名字
        * 异名同义：同一意义的对象具有不同的名字
## 数据库设计过程之逻辑数据库设计
* 目标：用指定DBMS要求的模式描述方法，给出概念数据库的逻辑模式描述。
* 提交物：逻辑数据库设计报告
* 使以下内容清楚：
    * 将E-R转换成逻辑模式
    * 遵循关系范式的设计原则
    * 也要注意折中，但折中时需要提示应用开发者或使用者可能存在的问题
    * 外模式和概念模式的定义
* 用关系模型规定的模式描述方法进行描述
### E-R图向关系模式的转换
基本转换规则：
* 实体-属性-关键字的转换
    * E-R图的实体转换为关系
    * E-R图的属性转换为关系的属性
    * E-R图的关键字转换为关系的关键字
* 复合属性的转化
    * 将每个分量属性作为复合属性所在实体的属性
    * 或者，将复合属性本身作为所在实体的属性
* 多值属性的转换
    * 将多值属性与所在实体的关键字一起组成一个新的关系
* 联系的转换
    * 一对一联系：
        * 若联系双方均部分参与(0..1)，则将联系定义为一个新的关系，属性为参与双方的关键字属性
        * 若联系一方全部参与(1..1) ，则将其关键字作为另一方属性，不需要联系集
    * 一对多联系：
        * 将单方参与实体的关键字，作为多方参与实体对应关系的属性
    * 多对多联系：
        * 将联系定义为新的关系，属性为参与双方实体的关键字
* 弱实体的转换
    * 所对应关系的关键字由弱实体本身的区分属性再加上所依赖的强实体的关键字构成
    * 弱实体集(从属实体)与强实体集(独立实体)之间的联系已经在弱实体集所对应的关系中表示出来了
* 多元联系的转换
    * 多元联系可以通过继承参与联系的各个实体的关键字而形成新的关系
    * 这些继承过来的关键字可作为新关系的关键字
    * 也可以新增一个区分属性作为关键字
    * 注意这两种转换的差异
    *  多元联系更需注意分析参与联系的实体的最小基数和最大基数
    * 如是否允许参与联系的多实体中有一个或多个实体不参与？
    * 多元联系可以转换为多个二元联系进行处理
        * 1型转换：供应(工程项目号，供货商号，零件号，数量)
        * 2型转换：供应(条目号,工程项目号，供货商号，零件号，数量）

不正确设计数据库会导致：冗余（受控冗余，非受控冗余（如table中的外键））、插入异常、删除异常
## 数据库设计过程之物理数据库设计
* 目标：结合指定DBMS物理数据库管理方法，给出概
念数据库的物理模式描述。
* 提交物：物理数据库设计报告
* 使以下内容清楚：
    * DBMS选型
    * 确定数据库的存储结构，文件类型：如定长文件、不定长文件；堆文件、散列文件或B-Tree文件等
    * 用Triggers, 设计一些完整性控制约束
    * 确定数据库的高效访问方式(索引访问，直接访问… …)
    * 评估和设置磁盘空间需求
    * 设计用户视图及访问控制规则，以进行安全性控制
    * 建立索引
    * 设计使数据库运行达到最佳效率的一些措施
    * 设计备份Backup和恢复Recovery的步骤
* 理解Oracle、Sybase或其他DBMS的物理数据库管理 方式，这是数据库管理员(DBA)的基本责任






