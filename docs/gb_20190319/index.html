<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Gb_20190319 - 绿叶律动</title><meta name="Description" content="绿叶律动"><meta property="og:title" content="Gb_20190319" />
<meta property="og:description" content="Using Go Modules Tyler Bui-Palsulich and Eno Compton
19 March 2019
Introduction This post is part 1 in a series.
 Part 1 — Using Go Modules (this post) Part 2 — Migrating To Go Modules Part 3 — Publishing Go Modules Part 4 — Go Modules: v2 and Beyond Part 5 — Keeping Your Modules Compatible  Note: For documentation on managing dependencies with modules, see Managing dependencies.
Go 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jefofrank.xyz/gb_20190319/" /><meta property="og:image" content="https://jefofrank.xyz/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-29T19:40:38+08:00" />
<meta property="article:modified_time" content="2022-10-29T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jefofrank.xyz/logo.png"/>

<meta name="twitter:title" content="Gb_20190319"/>
<meta name="twitter:description" content="Using Go Modules Tyler Bui-Palsulich and Eno Compton
19 March 2019
Introduction This post is part 1 in a series.
 Part 1 — Using Go Modules (this post) Part 2 — Migrating To Go Modules Part 3 — Publishing Go Modules Part 4 — Go Modules: v2 and Beyond Part 5 — Keeping Your Modules Compatible  Note: For documentation on managing dependencies with modules, see Managing dependencies.
Go 1."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jefofrank.xyz/gb_20190319/" /><link rel="prev" href="https://jefofrank.xyz/gb_20190314/" /><link rel="next" href="https://jefofrank.xyz/gb_20190321/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Gb_20190319",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jefofrank.xyz\/gb_20190319\/"
        },"image": ["https:\/\/jefofrank.xyz\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "go official blogs","wordcount":  2572 ,
        "url": "https:\/\/jefofrank.xyz\/gb_20190319\/","datePublished": "2022-10-29T19:40:38+08:00","dateModified": "2022-10-29T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Jefo","logo": "https:\/\/jefofrank.xyz\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Jefo"
            },"description": ""
    }
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-193031966-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-193031966-2');
</script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="绿叶律动"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> All posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/jf-011101" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="直接搜索更方便^-^" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="绿叶律动"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="直接搜索更方便^-^" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">All posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/jf-011101" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Gb_20190319</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/jf-011101" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jefo</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/2022/"><i class="far fa-folder fa-fw"></i>2022</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-10-29 19:40:38">2022-10-29 19:40:38</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 2572 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 13 分钟&nbsp;<span id="busuanzi_container_page_pv">
                    <i class="far fa-eye fa-fw"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;次阅读量</span>
                </span>
            </div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#creating-a-new-module">Creating a new module</a></li>
    <li><a href="#adding-a-dependency">Adding a dependency</a></li>
    <li><a href="#upgrading-dependencies">Upgrading dependencies</a></li>
    <li><a href="#adding-a-dependency-on-a-new-major-version">Adding a dependency on a new major version</a></li>
    <li><a href="#upgrading-a-dependency-to-a-new-major-version">Upgrading a dependency to a new major version</a></li>
    <li><a href="#removing-unused-dependencies">Removing unused dependencies</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="using-go-modules">Using Go Modules</h1>
<p>Tyler Bui-Palsulich and Eno Compton<br>
19 March 2019</p>
<h2 id="introduction">Introduction</h2>
<p>This post is part 1 in a series.</p>
<ul>
<li><strong>Part 1 — Using Go Modules</strong> (this post)</li>
<li>Part 2 — <a href="https://go.dev/blog/migrating-to-go-modules" target="_blank" rel="noopener noreffer">Migrating To Go Modules</a></li>
<li>Part 3 — <a href="https://go.dev/blog/publishing-go-modules" target="_blank" rel="noopener noreffer">Publishing Go Modules</a></li>
<li>Part 4 — <a href="https://go.dev/blog/v2-go-modules" target="_blank" rel="noopener noreffer">Go Modules: v2 and Beyond</a></li>
<li>Part 5 — <a href="https://go.dev/blog/module-compatibility" target="_blank" rel="noopener noreffer">Keeping Your Modules Compatible</a></li>
</ul>
<p><strong>Note:</strong> For documentation on managing dependencies with modules, see <a href="https://go.dev/doc/modules/managing-dependencies" target="_blank" rel="noopener noreffer">Managing dependencies</a>.</p>
<p>Go 1.11 and 1.12 include preliminary <a href="https://go.dev/doc/go1.11#modules" target="_blank" rel="noopener noreffer">support for modules</a>, Go’s <a href="https://blog.golang.org/versioning-proposal" target="_blank" rel="noopener noreffer">new dependency management system</a> that makes dependency version information explicit and easier to manage. This blog post is an introduction to the basic operations needed to get started using modules.</p>
<p>A module is a collection of <a href="https://go.dev/ref/spec#Packages" target="_blank" rel="noopener noreffer">Go packages</a> stored in a file tree with a <code>go.mod</code> file at its root. The <code>go.mod</code> file defines the module’s <em>module path</em>, which is also the import path used for the root directory, and its <em>dependency requirements</em>, which are the other modules needed for a successful build. Each dependency requirement is written as a module path and a specific <a href="http://semver.org/" target="_blank" rel="noopener noreffer">semantic version</a>.</p>
<p>As of Go 1.11, the go command enables the use of modules when the current directory or any parent directory has a <code>go.mod</code>, provided the directory is <em>outside</em> <code>$GOPATH/src</code>. (Inside <code>$GOPATH/src</code>, for compatibility, the go command still runs in the old GOPATH mode, even if a <code>go.mod</code> is found. See the <a href="https://go.dev/cmd/go/#hdr-Preliminary_module_support" target="_blank" rel="noopener noreffer">go command documentation</a> for details.) Starting in Go 1.13, module mode will be the default for all development.</p>
<p>This post walks through a sequence of common operations that arise when developing Go code with modules:</p>
<ul>
<li>Creating a new module.</li>
<li>Adding a dependency.</li>
<li>Upgrading dependencies.</li>
<li>Adding a dependency on a new major version.</li>
<li>Upgrading a dependency to a new major version.</li>
<li>Removing unused dependencies.</li>
</ul>
<h2 id="creating-a-new-module">Creating a new module</h2>
<p>Let’s create a new module.</p>
<p>Create a new, empty directory somewhere outside <code>$GOPATH/src</code>, <code>cd</code> into that directory, and then create a new source file, <code>hello.go</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s">&#34;Hello, world.&#34;</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Let’s write a test, too, in <code>hello_test.go</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="s">&#34;testing&#34;</span>

<span class="kd">func</span> <span class="nf">TestHello</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">want</span> <span class="o">:=</span> <span class="s">&#34;Hello, world.&#34;</span>
    <span class="k">if</span> <span class="nx">got</span> <span class="o">:=</span> <span class="nf">Hello</span><span class="p">();</span> <span class="nx">got</span> <span class="o">!=</span> <span class="nx">want</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Hello() = %q, want %q&#34;</span><span class="p">,</span> <span class="nx">got</span><span class="p">,</span> <span class="nx">want</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>At this point, the directory contains a package, but not a module, because there is no <code>go.mod</code> file. If we were working in <code>/home/gopher/hello</code> and ran <code>go test</code> now, we’d see:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go test
PASS
ok      _/home/gopher/hello 0.020s
$
</code></pre></td></tr></table>
</div>
</div><p>The last line summarizes the overall package test. Because we are working outside <code>$GOPATH</code> and also outside any module, the <code>go</code> command knows no import path for the current directory and makes up a fake one based on the directory name: <code>_/home/gopher/hello</code>.</p>
<p>Let’s make the current directory the root of a module by using <code>go mod init</code> and then try <code>go test</code> again:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go mod init example.com/hello
go: creating new go.mod: module example.com/hello
$ go test
PASS
ok      example.com/hello   0.020s
$
</code></pre></td></tr></table>
</div>
</div><p>Congratulations! You’ve written and tested your first module.</p>
<p>The <code>go mod init</code> command wrote a <code>go.mod</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ cat go.mod
module example.com/hello

go 1.12
$
</code></pre></td></tr></table>
</div>
</div><p>The <code>go.mod</code> file only appears in the root of the module. Packages in subdirectories have import paths consisting of the module path plus the path to the subdirectory. For example, if we created a subdirectory <code>world</code>, we would not need to (nor want to) run <code>go mod init</code> there. The package would automatically be recognized as part of the <code>example.com/hello</code> module, with import path <code>example.com/hello/world</code>.</p>
<h2 id="adding-a-dependency">Adding a dependency</h2>
<p>The primary motivation for Go modules was to improve the experience of using (that is, adding a dependency on) code written by other developers.</p>
<p>Let’s update our <code>hello.go</code> to import <code>rsc.io/quote</code> and use it to implement <code>Hello</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="s">&#34;rsc.io/quote&#34;</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">Hello</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Now let’s run the test again:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go test
go: finding rsc.io/quote v1.5.2
go: downloading rsc.io/quote v1.5.2
go: extracting rsc.io/quote v1.5.2
go: finding rsc.io/sampler v1.3.0
go: finding golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
go: downloading rsc.io/sampler v1.3.0
go: extracting rsc.io/sampler v1.3.0
go: downloading golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
go: extracting golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
PASS
ok      example.com/hello   0.023s
$
</code></pre></td></tr></table>
</div>
</div><p>The <code>go</code> command resolves imports by using the specific dependency module versions listed in <code>go.mod</code>. When it encounters an <code>import</code> of a package not provided by any module in <code>go.mod</code>, the <code>go</code> command automatically looks up the module containing that package and adds it to <code>go.mod</code>, using the latest version. (“Latest” is defined as the latest tagged stable (non-<a href="https://semver.org/#spec-item-9" target="_blank" rel="noopener noreffer">prerelease</a>) version, or else the latest tagged prerelease version, or else the latest untagged version.) In our example, <code>go test</code> resolved the new import <code>rsc.io/quote</code> to the module <code>rsc.io/quote v1.5.2</code>. It also downloaded two dependencies used by <code>rsc.io/quote</code>, namely <code>rsc.io/sampler</code> and <code>golang.org/x/text</code>. Only direct dependencies are recorded in the <code>go.mod</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ cat go.mod
module example.com/hello

go 1.12

require rsc.io/quote v1.5.2
$
</code></pre></td></tr></table>
</div>
</div><p>A second <code>go test</code> command will not repeat this work, since the <code>go.mod</code> is now up-to-date and the downloaded modules are cached locally (in <code>$GOPATH/pkg/mod</code>):</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go test
PASS
ok      example.com/hello   0.020s
$
</code></pre></td></tr></table>
</div>
</div><p>Note that while the <code>go</code> command makes adding a new dependency quick and easy, it is not without cost. Your module now literally <em>depends</em> on the new dependency in critical areas such as correctness, security, and proper licensing, just to name a few. For more considerations, see Russ Cox’s blog post, “<a href="https://research.swtch.com/deps" target="_blank" rel="noopener noreffer">Our Software Dependency Problem</a>.”</p>
<p>As we saw above, adding one direct dependency often brings in other indirect dependencies too. The command <code>go list -m all</code> lists the current module and all its dependencies:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go list -m all
example.com/hello
golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
rsc.io/quote v1.5.2
rsc.io/sampler v1.3.0
$
</code></pre></td></tr></table>
</div>
</div><p>In the <code>go list</code> output, the current module, also known as the <em>main module</em>, is always the first line, followed by dependencies sorted by module path.</p>
<p>The <code>golang.org/x/text</code> version <code>v0.0.0-20170915032832-14c0d48ead0c</code> is an example of a <a href="https://go.dev/cmd/go/#hdr-Pseudo_versions" target="_blank" rel="noopener noreffer">pseudo-version</a>, which is the <code>go</code> command’s version syntax for a specific untagged commit.</p>
<p>In addition to <code>go.mod</code>, the <code>go</code> command maintains a file named <code>go.sum</code> containing the expected <a href="https://go.dev/cmd/go/#hdr-Module_downloading_and_verification" target="_blank" rel="noopener noreffer">cryptographic hashes</a> of the content of specific module versions:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ cat go.sum
golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c h1:qgOY6WgZO...
golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c/go.mod h1:Nq...
rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3...
rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPX...
rsc.io/sampler v1.3.0 h1:7uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/Q...
rsc.io/sampler v1.3.0/go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9...
$
</code></pre></td></tr></table>
</div>
</div><p>The <code>go</code> command uses the <code>go.sum</code> file to ensure that future downloads of these modules retrieve the same bits as the first download, to ensure the modules your project depends on do not change unexpectedly, whether for malicious, accidental, or other reasons. Both <code>go.mod</code> and <code>go.sum</code> should be checked into version control.</p>
<h2 id="upgrading-dependencies">Upgrading dependencies</h2>
<p>With Go modules, versions are referenced with semantic version tags. A semantic version has three parts: major, minor, and patch. For example, for <code>v0.1.2</code>, the major version is 0, the minor version is 1, and the patch version is 2. Let’s walk through a couple minor version upgrades. In the next section, we’ll consider a major version upgrade.</p>
<p>From the output of <code>go list -m all</code>, we can see we’re using an untagged version of <code>golang.org/x/text</code>. Let’s upgrade to the latest tagged version and test that everything still works:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go get golang.org/x/text
go: finding golang.org/x/text v0.3.0
go: downloading golang.org/x/text v0.3.0
go: extracting golang.org/x/text v0.3.0
$ go test
PASS
ok      example.com/hello   0.013s
$
</code></pre></td></tr></table>
</div>
</div><p>Woohoo! Everything passes. Let’s take another look at <code>go list -m all</code> and the <code>go.mod</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go list -m all
example.com/hello
golang.org/x/text v0.3.0
rsc.io/quote v1.5.2
rsc.io/sampler v1.3.0
$ cat go.mod
module example.com/hello

go 1.12

require (
    golang.org/x/text v0.3.0 // indirect
    rsc.io/quote v1.5.2
)
$
</code></pre></td></tr></table>
</div>
</div><p>The <code>golang.org/x/text</code> package has been upgraded to the latest tagged version (<code>v0.3.0</code>). The <code>go.mod</code> file has been updated to specify <code>v0.3.0</code> too. The <code>indirect</code> comment indicates a dependency is not used directly by this module, only indirectly by other module dependencies. See <code>go help modules</code> for details.</p>
<p>Now let’s try upgrading the <code>rsc.io/sampler</code> minor version. Start the same way, by running <code>go get</code> and running tests:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go get rsc.io/sampler
go: finding rsc.io/sampler v1.99.99
go: downloading rsc.io/sampler v1.99.99
go: extracting rsc.io/sampler v1.99.99
$ go test
--- FAIL: TestHello (0.00s)
    hello_test.go:8: Hello() = &#34;99 bottles of beer on the wall, 99 bottles of beer, ...&#34;, want &#34;Hello, world.&#34;
FAIL
exit status 1
FAIL    example.com/hello   0.014s
$
</code></pre></td></tr></table>
</div>
</div><p>Uh, oh! The test failure shows that the latest version of <code>rsc.io/sampler</code> is incompatible with our usage. Let’s list the available tagged versions of that module:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go list -m -versions rsc.io/sampler
rsc.io/sampler v1.0.0 v1.2.0 v1.2.1 v1.3.0 v1.3.1 v1.99.99
$
</code></pre></td></tr></table>
</div>
</div><p>We had been using v1.3.0; v1.99.99 is clearly no good. Maybe we can try using v1.3.1 instead:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go get rsc.io/sampler@v1.3.1
go: finding rsc.io/sampler v1.3.1
go: downloading rsc.io/sampler v1.3.1
go: extracting rsc.io/sampler v1.3.1
$ go test
PASS
ok      example.com/hello   0.022s
$
</code></pre></td></tr></table>
</div>
</div><p>Note the explicit <code>@v1.3.1</code> in the <code>go get</code> argument. In general each argument passed to <code>go get</code> can take an explicit version; the default is <code>@latest</code>, which resolves to the latest version as defined earlier.</p>
<h2 id="adding-a-dependency-on-a-new-major-version">Adding a dependency on a new major version</h2>
<p>Let’s add a new function to our package: <code>func Proverb</code> returns a Go concurrency proverb, by calling <code>quote.Concurrency</code>, which is provided by the module <code>rsc.io/quote/v3</code>. First we update <code>hello.go</code> to add the new function:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;rsc.io/quote&#34;</span>
    <span class="nx">quoteV3</span> <span class="s">&#34;rsc.io/quote/v3&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">Hello</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Proverb</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quoteV3</span><span class="p">.</span><span class="nf">Concurrency</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Then we add a test to <code>hello_test.go</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">func TestProverb(t *testing.T) {
    want := &#34;Concurrency is not parallelism.&#34;
    if got := Proverb(); got != want {
        t.Errorf(&#34;Proverb() = %q, want %q&#34;, got, want)
    }
}
</code></pre></td></tr></table>
</div>
</div><p>Then we can test our code:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go test
go: finding rsc.io/quote/v3 v3.1.0
go: downloading rsc.io/quote/v3 v3.1.0
go: extracting rsc.io/quote/v3 v3.1.0
PASS
ok      example.com/hello   0.024s
$
</code></pre></td></tr></table>
</div>
</div><p>Note that our module now depends on both <code>rsc.io/quote</code> and <code>rsc.io/quote/v3</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go list -m rsc.io/q...
rsc.io/quote v1.5.2
rsc.io/quote/v3 v3.1.0
$
</code></pre></td></tr></table>
</div>
</div><p>Each different major version (<code>v1</code>, <code>v2</code>, and so on) of a Go module uses a different module path: starting at <code>v2</code>, the path must end in the major version. In the example, <code>v3</code> of <code>rsc.io/quote</code> is no longer <code>rsc.io/quote</code>: instead, it is identified by the module path <code>rsc.io/quote/v3</code>. This convention is called <a href="https://research.swtch.com/vgo-import" target="_blank" rel="noopener noreffer">semantic import versioning</a>, and it gives incompatible packages (those with different major versions) different names. In contrast, <code>v1.6.0</code> of <code>rsc.io/quote</code> should be backwards-compatible with <code>v1.5.2</code>, so it reuses the name <code>rsc.io/quote</code>. (In the previous section, <code>rsc.io/sampler</code> <code>v1.99.99</code> <em>should</em> have been backwards-compatible with <code>rsc.io/sampler</code> <code>v1.3.0</code>, but bugs or incorrect client assumptions about module behavior can both happen.)</p>
<p>The <code>go</code> command allows a build to include at most one version of any particular module path, meaning at most one of each major version: one <code>rsc.io/quote</code>, one <code>rsc.io/quote/v2</code>, one <code>rsc.io/quote/v3</code>, and so on. This gives module authors a clear rule about possible duplication of a single module path: it is impossible for a program to build with both <code>rsc.io/quote v1.5.2</code> and <code>rsc.io/quote v1.6.0</code>. At the same time, allowing different major versions of a module (because they have different paths) gives module consumers the ability to upgrade to a new major version incrementally. In this example, we wanted to use <code>quote.Concurrency</code> from <code>rsc/quote/v3 v3.1.0</code> but are not yet ready to migrate our uses of <code>rsc.io/quote v1.5.2</code>. The ability to migrate incrementally is especially important in a large program or codebase.</p>
<h2 id="upgrading-a-dependency-to-a-new-major-version">Upgrading a dependency to a new major version</h2>
<p>Let’s complete our conversion from using <code>rsc.io/quote</code> to using only <code>rsc.io/quote/v3</code>. Because of the major version change, we should expect that some APIs may have been removed, renamed, or otherwise changed in incompatible ways. Reading the docs, we can see that <code>Hello</code> has become <code>HelloV3</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">$</span> <span class="k">go</span> <span class="nx">doc</span> <span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">quote</span><span class="o">/</span><span class="nx">v3</span>
<span class="kn">package</span> <span class="nx">quote</span> <span class="c1">// import &#34;rsc.io/quote/v3&#34;
</span><span class="c1"></span>
<span class="nx">Package</span> <span class="nx">quote</span> <span class="nx">collects</span> <span class="nx">pithy</span> <span class="nx">sayings</span><span class="p">.</span>

<span class="kd">func</span> <span class="nf">Concurrency</span><span class="p">()</span> <span class="kt">string</span>
<span class="kd">func</span> <span class="nf">GlassV3</span><span class="p">()</span> <span class="kt">string</span>
<span class="kd">func</span> <span class="nf">GoV3</span><span class="p">()</span> <span class="kt">string</span>
<span class="kd">func</span> <span class="nf">HelloV3</span><span class="p">()</span> <span class="kt">string</span>
<span class="kd">func</span> <span class="nf">OptV3</span><span class="p">()</span> <span class="kt">string</span>
<span class="err">$</span>
</code></pre></td></tr></table>
</div>
</div><p>We can update our use of <code>quote.Hello()</code> in <code>hello.go</code> to use <code>quoteV3.HelloV3()</code>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="nx">quoteV3</span> <span class="s">&#34;rsc.io/quote/v3&#34;</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quoteV3</span><span class="p">.</span><span class="nf">HelloV3</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Proverb</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quoteV3</span><span class="p">.</span><span class="nf">Concurrency</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>And then at this point, there’s no need for the renamed import anymore, so we can undo that:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="s">&#34;rsc.io/quote/v3&#34;</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">HelloV3</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Proverb</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">Concurrency</span><span class="p">()</span>
<span class="p">}</span>
</code></pre></td></tr></table>
</div>
</div><p>Let’s re-run the tests to make sure everything is working:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go test
PASS
ok      example.com/hello       0.014s
</code></pre></td></tr></table>
</div>
</div><h2 id="removing-unused-dependencies">Removing unused dependencies</h2>
<p>We’ve removed all our uses of <code>rsc.io/quote</code>, but it still shows up in <code>go list -m all</code> and in our <code>go.mod</code> file:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go list -m all
example.com/hello
golang.org/x/text v0.3.0
rsc.io/quote v1.5.2
rsc.io/quote/v3 v3.1.0
rsc.io/sampler v1.3.1
$ cat go.mod
module example.com/hello

go 1.12

require (
    golang.org/x/text v0.3.0 // indirect
    rsc.io/quote v1.5.2
    rsc.io/quote/v3 v3.0.0
    rsc.io/sampler v1.3.1 // indirect
)
$
</code></pre></td></tr></table>
</div>
</div><p>Why? Because building a single package, like with <code>go build</code> or <code>go test</code>, can easily tell when something is missing and needs to be added, but not when something can safely be removed. Removing a dependency can only be done after checking all packages in a module, and all possible build tag combinations for those packages. An ordinary build command does not load this information, and so it cannot safely remove dependencies.</p>
<p>The <code>go mod tidy</code> command cleans up these unused dependencies:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go mod tidy
$ go list -m all
example.com/hello
golang.org/x/text v0.3.0
rsc.io/quote/v3 v3.1.0
rsc.io/sampler v1.3.1
$ cat go.mod
module example.com/hello

go 1.12

require (
    golang.org/x/text v0.3.0 // indirect
    rsc.io/quote/v3 v3.1.0
    rsc.io/sampler v1.3.1 // indirect
)

$ go test
PASS
ok      example.com/hello   0.020s
$
</code></pre></td></tr></table>
</div>
</div><h2 id="conclusion">Conclusion</h2>
<p>Go modules are the future of dependency management in Go. Module functionality is now available in all supported Go versions (that is, in Go 1.11 and Go 1.12).</p>
<p>This post introduced these workflows using Go modules:</p>
<ul>
<li><code>go mod init</code> creates a new module, initializing the <code>go.mod</code> file that describes it.</li>
<li><code>go build</code>, <code>go test</code>, and other package-building commands add new dependencies to <code>go.mod</code> as needed.</li>
<li><code>go list -m all</code> prints the current module’s dependencies.</li>
<li><code>go get</code> changes the required version of a dependency (or adds a new dependency).</li>
<li><code>go mod tidy</code> removes unused dependencies.</li>
</ul>
<p>We encourage you to start using modules in your local development and to add <code>go.mod</code> and <code>go.sum</code> files to your projects. To provide feedback and help shape the future of dependency management in Go, please send us <a href="https://go.dev/issue/new" target="_blank" rel="noopener noreffer">bug reports</a> or <a href="https://go.dev/wiki/ExperienceReports" target="_blank" rel="noopener noreffer">experience reports</a>.</p>
<p>Thanks for all your feedback and help improving modules.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-10-29 00:00:00</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://jefofrank.xyz/gb_20190319/" data-title="Gb_20190319" data-hashtags="go official blogs"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://jefofrank.xyz/gb_20190319/" data-hashtag="go official blogs"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://jefofrank.xyz/gb_20190319/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://jefofrank.xyz/gb_20190319/" data-title="Gb_20190319"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://jefofrank.xyz/gb_20190319/" data-title="Gb_20190319"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 百度" data-sharer="baidu" data-url="https://jefofrank.xyz/gb_20190319/" data-title="Gb_20190319"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/baidu.svg"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/go-official-blogs/">go official blogs</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/gb_20190314/" class="prev" rel="prev" title="Gb_20190314"><i class="fas fa-angle-left fa-fw"></i>Gb_20190314</a>
            <a href="/gb_20190321/" class="next" rel="next" title="Gb_20190321">Gb_20190321<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.89.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/jf-011101" target="_blank">Jefo</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="https://beian.miit.gov.cn/">赣ICP备2022007470号-1</a></span></br>
                <span id="busuanzi_container_site_pv">
                    访问量 <span id="busuanzi_value_site_pv"></span> 次
                </span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_uv">
                    访客数 <span id="busuanzi_value_site_uv"></span> 人次
                </span>
                </br><script>
                    function siteTime() {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = 2021;
                        var startMonth = 3;
                        var startDate = 27;
                        var startHour = 19;
                        var startMinute = 15;
                        var startSecond = 11;
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);
                        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                            minutes);
                        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                            diffMinutes * minutes) / seconds);
                        if (startYear == todayYear) {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffDays + " 天 " + diffHours +
                                " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        } else {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + " 年 " + diffDays +
                                " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        }
                    }
                    setInterval(siteTime, 1000);
                </script>
                    <span id="sitetime">载入运行时间...</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://jefos-blog.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"data":{"id-1":"绿叶律动","id-2":"绿叶律动"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"J0OW8CCKJZ","algoliaIndex":"JF-2","algoliaSearchKey":"3b4a19e831c95174aca4c03fcdf95f5c","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
