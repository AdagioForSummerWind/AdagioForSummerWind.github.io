<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Gb_20190926 - 绿叶律动</title><meta name="Description" content="绿叶律动"><meta property="og:title" content="Gb_20190926" />
<meta property="og:description" content="Publishing Go Modules Tyler Bui-Palsulich
26 September 2019
Introduction This post is part 3 in a series.
 Part 1 — Using Go Modules Part 2 — Migrating To Go Modules Part 3 — Publishing Go Modules (this post) Part 4 — Go Modules: v2 and Beyond Part 5 — Keeping Your Modules Compatible  Note: For documentation on developing modules, see Developing and publishing modules.
This post discusses how to write and publish modules so other modules can depend on them." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://jefofrank.xyz/gb_20190926/" /><meta property="og:image" content="https://jefofrank.xyz/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-10-29T19:50:39+08:00" />
<meta property="article:modified_time" content="2022-10-29T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://jefofrank.xyz/logo.png"/>

<meta name="twitter:title" content="Gb_20190926"/>
<meta name="twitter:description" content="Publishing Go Modules Tyler Bui-Palsulich
26 September 2019
Introduction This post is part 3 in a series.
 Part 1 — Using Go Modules Part 2 — Migrating To Go Modules Part 3 — Publishing Go Modules (this post) Part 4 — Go Modules: v2 and Beyond Part 5 — Keeping Your Modules Compatible  Note: For documentation on developing modules, see Developing and publishing modules.
This post discusses how to write and publish modules so other modules can depend on them."/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://jefofrank.xyz/gb_20190926/" /><link rel="prev" href="https://jefofrank.xyz/gb_20190903/" /><link rel="next" href="https://jefofrank.xyz/gb_20191017/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Gb_20190926",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/jefofrank.xyz\/gb_20190926\/"
        },"image": ["https:\/\/jefofrank.xyz\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "go official blogs","wordcount":  1559 ,
        "url": "https:\/\/jefofrank.xyz\/gb_20190926\/","datePublished": "2022-10-29T19:50:39+08:00","dateModified": "2022-10-29T00:00:00+00:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "Jefo","logo": "https:\/\/jefofrank.xyz\/images\/avatar.png"},"author": {
                "@type": "Person",
                "name": "Jefo"
            },"description": ""
    }
    </script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-193031966-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-193031966-2');
</script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="绿叶律动"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> All posts </a><a class="menu-item" href="/tags/"> Tags </a><a class="menu-item" href="/categories/"> Categories </a><a class="menu-item" href="/about/"> About </a><a class="menu-item" href="https://github.com/jf-011101" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="直接搜索更方便^-^" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="绿叶律动"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw'></i></span><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="直接搜索更方便^-^" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">All posts</a><a class="menu-item" href="/tags/" title="">Tags</a><a class="menu-item" href="/categories/" title="">Categories</a><a class="menu-item" href="/about/" title="">About</a><a class="menu-item" href="https://github.com/jf-011101" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">Gb_20190926</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/jf-011101" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Jefo</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/2022/"><i class="far fa-folder fa-fw"></i>2022</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2022-10-29 19:50:39">2022-10-29 19:50:39</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 1559 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;<span id="busuanzi_container_page_pv">
                    <i class="far fa-eye fa-fw"></i>&nbsp;<span id="busuanzi_value_page_pv"></span>&nbsp;次阅读量</span>
                </span>
            </div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#introduction">Introduction</a></li>
    <li><a href="#project-setup">Project setup</a></li>
    <li><a href="#semantic-versions-and-modules">Semantic versions and modules</a></li>
    <li><a href="#v0-the-initial-unstable-version">v0: the initial, unstable version</a></li>
    <li><a href="#v1-the-first-stable-version">v1: the first stable version</a></li>
    <li><a href="#conclusion">Conclusion</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h1 id="publishing-go-modules">Publishing Go Modules</h1>
<p>Tyler Bui-Palsulich<br>
26 September 2019</p>
<h2 id="introduction">Introduction</h2>
<p>This post is part 3 in a series.</p>
<ul>
<li>Part 1 — <a href="https://go.dev/blog/using-go-modules" target="_blank" rel="noopener noreffer">Using Go Modules</a></li>
<li>Part 2 — <a href="https://go.dev/blog/migrating-to-go-modules" target="_blank" rel="noopener noreffer">Migrating To Go Modules</a></li>
<li><strong>Part 3 — Publishing Go Modules</strong> (this post)</li>
<li>Part 4 — <a href="https://go.dev/blog/v2-go-modules" target="_blank" rel="noopener noreffer">Go Modules: v2 and Beyond</a></li>
<li>Part 5 — <a href="https://go.dev/blog/module-compatibility" target="_blank" rel="noopener noreffer">Keeping Your Modules Compatible</a></li>
</ul>
<p><strong>Note:</strong> For documentation on developing modules, see <a href="https://go.dev/doc/modules/developing" target="_blank" rel="noopener noreffer">Developing and publishing modules</a>.</p>
<p>This post discusses how to write and publish modules so other modules can depend on them.</p>
<p>Please note: this post covers development up to and including <code>v1</code>. If you are interested in <code>v2</code>, please see <a href="https://go.dev/blog/v2-go-modules" target="_blank" rel="noopener noreffer">Go Modules: v2 and Beyond</a>.</p>
<p>This post uses <a href="https://git-scm.com/" target="_blank" rel="noopener noreffer">Git</a> in examples. <a href="https://www.mercurial-scm.org/" target="_blank" rel="noopener noreffer">Mercurial</a>, <a href="http://wiki.bazaar.canonical.com/" target="_blank" rel="noopener noreffer">Bazaar</a>, and others are supported as well.</p>
<h2 id="project-setup">Project setup</h2>
<p>For this post, you’ll need an existing project to use as an example. So, start with the files from the end of the <a href="https://blog.golang.org/using-go-modules" target="_blank" rel="noopener noreffer">Using Go Modules</a> article:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="err">$</span> <span class="nx">cat</span> <span class="k">go</span><span class="p">.</span><span class="nx">mod</span>
<span class="nx">module</span> <span class="nx">example</span><span class="p">.</span><span class="nx">com</span><span class="o">/</span><span class="nx">hello</span>

<span class="k">go</span> <span class="mf">1.12</span>

<span class="nx">require</span> <span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">quote</span><span class="o">/</span><span class="nx">v3</span> <span class="nx">v3</span><span class="mf">.1.0</span>

<span class="err">$</span> <span class="nx">cat</span> <span class="k">go</span><span class="p">.</span><span class="nx">sum</span>
<span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">x</span><span class="o">/</span><span class="nx">text</span> <span class="nx">v0</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20170915032832</span><span class="o">-</span><span class="mi">14</span><span class="nx">c0d48ead0c</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">qgOY6WgZOaTkIIMiVjBQcw93ERBE4m30iBm00nkL0i8</span><span class="p">=</span>
<span class="nx">golang</span><span class="p">.</span><span class="nx">org</span><span class="o">/</span><span class="nx">x</span><span class="o">/</span><span class="nx">text</span> <span class="nx">v0</span><span class="mf">.0.0</span><span class="o">-</span><span class="mi">20170915032832</span><span class="o">-</span><span class="mi">14</span><span class="nx">c0d48ead0c</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">NqM8EUOU14njkJ3fqMW</span><span class="o">+</span><span class="nx">pc6Ldnwhi</span><span class="o">/</span><span class="nx">IjpwHt7yyuwOQ</span><span class="p">=</span>
<span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">quote</span><span class="o">/</span><span class="nx">v3</span> <span class="nx">v3</span><span class="mf">.1.0</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">9</span><span class="nx">JKUTTIUgS6kzR9mK1YuGKv6Nl</span><span class="o">+</span><span class="nx">DijDNIc0ghT58FaY</span><span class="p">=</span>
<span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">quote</span><span class="o">/</span><span class="nx">v3</span> <span class="nx">v3</span><span class="mf">.1.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">yEA65RcK8LyAZtP9Kv3t0HmxON59tX3rD</span><span class="o">+</span><span class="nx">tICJqUlj0</span><span class="p">=</span>
<span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">sampler</span> <span class="nx">v1</span><span class="mf">.3.0</span> <span class="nx">h1</span><span class="p">:</span><span class="mi">7</span><span class="nx">uVkIFmeBqHfdjD</span><span class="o">+</span><span class="nx">gZwtXXI</span><span class="o">+</span><span class="nx">RODJ2Wc4O7MPEh</span><span class="o">/</span><span class="nx">QiW4</span><span class="p">=</span>
<span class="nx">rsc</span><span class="p">.</span><span class="nx">io</span><span class="o">/</span><span class="nx">sampler</span> <span class="nx">v1</span><span class="mf">.3.0</span><span class="o">/</span><span class="k">go</span><span class="p">.</span><span class="nx">mod</span> <span class="nx">h1</span><span class="p">:</span><span class="nx">T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9JXDnKaTXpA</span><span class="p">=</span>

<span class="err">$</span> <span class="nx">cat</span> <span class="nx">hello</span><span class="p">.</span><span class="k">go</span>
<span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="s">&#34;rsc.io/quote/v3&#34;</span>

<span class="kd">func</span> <span class="nf">Hello</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">HelloV3</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">Proverb</span><span class="p">()</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">quote</span><span class="p">.</span><span class="nf">Concurrency</span><span class="p">()</span>
<span class="p">}</span>

<span class="err">$</span> <span class="nx">cat</span> <span class="nx">hello_test</span><span class="p">.</span><span class="k">go</span>
<span class="kn">package</span> <span class="nx">hello</span>

<span class="kn">import</span> <span class="p">(</span>
    <span class="s">&#34;testing&#34;</span>
<span class="p">)</span>

<span class="kd">func</span> <span class="nf">TestHello</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">want</span> <span class="o">:=</span> <span class="s">&#34;Hello, world.&#34;</span>
    <span class="k">if</span> <span class="nx">got</span> <span class="o">:=</span> <span class="nf">Hello</span><span class="p">();</span> <span class="nx">got</span> <span class="o">!=</span> <span class="nx">want</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Hello() = %q, want %q&#34;</span><span class="p">,</span> <span class="nx">got</span><span class="p">,</span> <span class="nx">want</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">TestProverb</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span><span class="nx">testing</span><span class="p">.</span><span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">want</span> <span class="o">:=</span> <span class="s">&#34;Concurrency is not parallelism.&#34;</span>
    <span class="k">if</span> <span class="nx">got</span> <span class="o">:=</span> <span class="nf">Proverb</span><span class="p">();</span> <span class="nx">got</span> <span class="o">!=</span> <span class="nx">want</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;Proverb() = %q, want %q&#34;</span><span class="p">,</span> <span class="nx">got</span><span class="p">,</span> <span class="nx">want</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="err">$</span>
</code></pre></td></tr></table>
</div>
</div><p>Next, create a new <code>git</code> repository and add an initial commit. If you’re publishing your own project, be sure to include a <code>LICENSE</code> file. Change to the directory containing the <code>go.mod</code> then create the repo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ git init
$ git add LICENSE go.mod go.sum hello.go hello_test.go
$ git commit -m &#34;hello: initial commit&#34;
$
</code></pre></td></tr></table>
</div>
</div><h2 id="semantic-versions-and-modules">Semantic versions and modules</h2>
<p>Every required module in a <code>go.mod</code> has a <a href="https://semver.org/" target="_blank" rel="noopener noreffer">semantic version</a>, the minimum version of that dependency to use to build the module.</p>
<p>A semantic version has the form <code>vMAJOR.MINOR.PATCH</code>.</p>
<ul>
<li>Increment the <code>MAJOR</code> version when you make a <a href="https://go.dev/doc/go1compat" target="_blank" rel="noopener noreffer">backwards incompatible</a> change to the public API of your module. This should only be done when absolutely necessary.</li>
<li>Increment the <code>MINOR</code> version when you make a backwards compatible change to the API, like changing dependencies or adding a new function, method, struct field, or type.</li>
<li>Increment the <code>PATCH</code> version after making minor changes that don’t affect your module’s public API or dependencies, like fixing a bug.</li>
</ul>
<p>You can specify pre-release versions by appending a hyphen and dot separated identifiers (for example, <code>v1.0.1-alpha</code> or <code>v2.2.2-beta.2</code>). Normal releases are preferred by the <code>go</code> command over pre-release versions, so users must ask for pre-release versions explicitly (for example, <code>go get example.com/hello@v1.0.1-alpha</code>) if your module has any normal releases.</p>
<p><code>v0</code> major versions and pre-release versions do not guarantee backwards compatibility. They let you refine your API before making stability commitments to your users. However, <code>v1</code> major versions and beyond require backwards compatibility within that major version.</p>
<p>The version referenced in a <code>go.mod</code> may be an explicit release tagged in the repository (for example, <code>v1.5.2</code>), or it may be a <a href="https://go.dev/ref/mod#pseudo-versions" target="_blank" rel="noopener noreffer">pseudo-version</a> based on a specific commit (for example, <code>v0.0.0-20170915032832-14c0d48ead0c</code>). Pseudo-versions are a special type of pre-release version. Pseudo-versions are useful when a user needs to depend on a project that has not published any semantic version tags, or develop against a commit that hasn’t been tagged yet, but users should not assume that pseudo-versions provide a stable or well-tested API. Tagging your modules with explicit versions signals to your users that specific versions are fully tested and ready to use.</p>
<p>Once you start tagging your repo with versions, it’s important to keep tagging new releases as you develop your module. When users request a new version of your module (with <code>go get -u</code> or <code>go get example.com/hello</code>), the <code>go</code> command will choose the greatest semantic release version available, even if that version is several years old and many changes behind the primary branch. Continuing to tag new releases will make your ongoing improvements available to your users.</p>
<p>Do not delete version tags from your repo. If you find a bug or a security issue with a version, release a new version. If people depend on a version that you have deleted, their builds may fail. Similarly, once you release a version, do not change or overwrite it. The <a href="https://blog.golang.org/module-mirror-launch" target="_blank" rel="noopener noreffer">module mirror and checksum database</a> store modules, their versions, and signed cryptographic hashes to ensure that the build of a given version remains reproducible over time.</p>
<h2 id="v0-the-initial-unstable-version">v0: the initial, unstable version</h2>
<p>Let’s tag the module with a <code>v0</code> semantic version. A <code>v0</code> version does not make any stability guarantees, so nearly all projects should start with <code>v0</code> as they refine their public API.</p>
<p>Tagging a new version has a few steps:</p>
<ol>
<li>
<p>Run <code>go mod tidy</code>, which removes any dependencies the module might have accumulated that are no longer necessary.</p>
</li>
<li>
<p>Run <code>go test ./...</code> a final time to make sure everything is working.</p>
</li>
<li>
<p>Tag the project with a new version using <a href="https://git-scm.com/docs/git-tag" target="_blank" rel="noopener noreffer"><code>git tag</code></a>.</p>
</li>
<li>
<p>Push the new tag to the origin repository.</p>
</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go mod tidy
$ go test ./...
ok      example.com/hello       0.015s
$ git add go.mod go.sum hello.go hello_test.go
$ git commit -m &#34;hello: changes for v0.1.0&#34;
$ git tag v0.1.0
$ git push origin v0.1.0
$
</code></pre></td></tr></table>
</div>
</div><p>Now other projects can depend on <code>v0.1.0</code> of <code>example.com/hello</code>. For your own module, you can run <code>go list -m example.com/hello@v0.1.0</code> to confirm the latest version is available (this example module does not exist, so no versions are available). If you don’t see the latest version immediately and you’re using the Go module proxy (the default since Go 1.13), try again in a few minutes to give the proxy time to load the new version.</p>
<p>If you add to the public API, make a breaking change to a <code>v0</code> module, or upgrade the minor or version of one of your dependencies, increment the <code>MINOR</code> version for your next release. For example, the next release after <code>v0.1.0</code> would be <code>v0.2.0</code>.</p>
<p>If you fix a bug in an existing version, increment the <code>PATCH</code> version. For example, the next release after <code>v0.1.0</code> would be <code>v0.1.1</code>.</p>
<h2 id="v1-the-first-stable-version">v1: the first stable version</h2>
<p>Once you are absolutely sure your module’s API is stable, you can release <code>v1.0.0</code>. A <code>v1</code> major version communicates to users that no incompatible changes will be made to the module’s API. They can upgrade to new <code>v1</code> minor and patch releases, and their code should not break. Function and method signatures will not change, exported types will not be removed, and so on. If there are changes to the API, they will be backwards compatible (for example, adding a new field to a struct) and will be included in a new minor release. If there are bug fixes (for example, a security fix), they will be included in a patch release (or as part of a minor release).</p>
<p>Sometimes, maintaining backwards compatibility can lead to awkward APIs. That’s OK. An imperfect API is better than breaking users' existing code.</p>
<p>The standard library’s <code>strings</code> package is a prime example of maintaining backwards compatibility at the cost of API consistency.</p>
<ul>
<li><a href="https://godoc.org/strings#Split" target="_blank" rel="noopener noreffer"><code>Split</code></a> slices a string into all substrings separated by a separator and returns a slice of the substrings between those separators.</li>
<li><a href="https://godoc.org/strings#SplitN" target="_blank" rel="noopener noreffer"><code>SplitN</code></a> can be used to control the number of substrings to return.</li>
</ul>
<p>However, <a href="https://godoc.org/strings#Replace" target="_blank" rel="noopener noreffer"><code>Replace</code></a> took a count of how many instances of the string to replace from the beginning (unlike <code>Split</code>).</p>
<p>Given <code>Split</code> and <code>SplitN</code>, you would expect functions like <code>Replace</code> and <code>ReplaceN</code>. But, we couldn’t change the existing <code>Replace</code> without breaking callers, which we promised not to do. So, in Go 1.12, we added a new function, <a href="https://godoc.org/strings#ReplaceAll" target="_blank" rel="noopener noreffer"><code>ReplaceAll</code></a>. The resulting API is a little odd, since <code>Split</code> and <code>Replace</code> behave differently, but that inconsistency is better than a breaking change.</p>
<p>Let’s say you’re happy with the API of <code>example.com/hello</code> and you want to release <code>v1</code> as the first stable version.</p>
<p>Tagging <code>v1</code> uses the same process as tagging a <code>v0</code> version: run <code>go mod tidy</code> and <code>go test ./...</code>, tag the version, and push the tag to the origin repository:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">$ go mod tidy
$ go test ./...
ok      example.com/hello       0.015s
$ git add go.mod go.sum hello.go hello_test.go
$ git commit -m &#34;hello: changes for v1.0.0&#34;
$ git tag v1.0.0
$ git push origin v1.0.0
$
</code></pre></td></tr></table>
</div>
</div><p>At this point, the <code>v1</code> API of <code>example.com/hello</code> is solidified. This communicates to everyone that our API is stable and they should feel comfortable using it.</p>
<h2 id="conclusion">Conclusion</h2>
<p>This post walked through the process of tagging a module with semantic versions and when to release <code>v1</code>. A future post will cover how to maintain and publish modules at <code>v2</code> and beyond.</p>
<p>To provide feedback and help shape the future of dependency management in Go, please send us <a href="https://go.dev/issue/new" target="_blank" rel="noopener noreffer">bug reports</a> or <a href="https://go.dev/wiki/ExperienceReports" target="_blank" rel="noopener noreffer">experience reports</a>.</p>
<p>Thanks for all your feedback and help improving Go modules.</p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2022-10-29 00:00:00</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://jefofrank.xyz/gb_20190926/" data-title="Gb_20190926" data-hashtags="go official blogs"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://jefofrank.xyz/gb_20190926/" data-hashtag="go official blogs"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Reddit" data-sharer="reddit" data-url="https://jefofrank.xyz/gb_20190926/"><i class="fab fa-reddit fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://jefofrank.xyz/gb_20190926/" data-title="Gb_20190926"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://jefofrank.xyz/gb_20190926/" data-title="Gb_20190926"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 百度" data-sharer="baidu" data-url="https://jefofrank.xyz/gb_20190926/" data-title="Gb_20190926"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/baidu.svg"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/go-official-blogs/">go official blogs</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/gb_20190903/" class="prev" rel="prev" title="Gb_20190903"><i class="fas fa-angle-left fa-fw"></i>Gb_20190903</a>
            <a href="/gb_20191017/" class="next" rel="next" title="Gb_20191017">Gb_20191017<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments"><div id="disqus_thread" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://disqus.com/?ref_noscript">Disqus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.89.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2021 - 2022</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/jf-011101" target="_blank">Jefo</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href="https://beian.miit.gov.cn/">赣ICP备2022007470号-1</a></span></br>
                <span id="busuanzi_container_site_pv">
                    访问量 <span id="busuanzi_value_site_pv"></span> 次
                </span>
                &nbsp;|&nbsp;
                <span id="busuanzi_container_site_uv">
                    访客数 <span id="busuanzi_value_site_uv"></span> 人次
                </span>
                </br><script>
                    function siteTime() {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = 2021;
                        var startMonth = 3;
                        var startDate = 27;
                        var startHour = 19;
                        var startMinute = 15;
                        var startSecond = 11;
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);
                        var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                        var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                            minutes);
                        var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                            diffMinutes * minutes) / seconds);
                        if (startYear == todayYear) {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffDays + " 天 " + diffHours +
                                " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        } else {
                            
                            document.getElementById("sitetime").innerHTML = "已安全运行 " + diffYears + " 年 " + diffDays +
                                " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                        }
                    }
                    setInterval(siteTime, 1000);
                </script>
                    <span id="sitetime">载入运行时间...</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://jefos-blog.disqus.com/embed.js" defer></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/algoliasearch@4.2.0/dist/algoliasearch-lite.umd.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@7.0.4/dist/typeit.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"data":{"id-1":"绿叶律动","id-2":"绿叶律动"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"algoliaAppID":"J0OW8CCKJZ","algoliaIndex":"JF-2","algoliaSearchKey":"3b4a19e831c95174aca4c03fcdf95f5c","highlightTag":"em","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"algolia"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
